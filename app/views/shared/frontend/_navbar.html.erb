<nav class="navbar has-shadow" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <%= image_pack_tag 'citiesocial_logo.png' %>
    </a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      <%= form_tag search_products_path, method: :get, class: 'questions-search-form'  do %>
        <div class="navbar-item field has-addons">
          <div class="control">
            <input class="form-control input" name="query_string" type="text" placeholder="輸入關鍵字">
          </div>
          <div class="control">
            <button type="submit" class="button is-primary">
              <i class="fas fa-search"></i>&nbsp; 搜尋
            </button>
          </div>
        </div>
      <% end %>
    </div>
    <div class="navbar-end">
      <div class="navbar-item">
        <% if user_signed_in? %>
          <div class="navbar-item" data-controller="cart">
            <%= link_to cart_path do %>
              <i class="fas fa-shopping-cart"></i>
              <span data-target="cart.count" data-action="addToCartEvent@document->cart#updateCart">
                (<%= current_cart.items.count %>)
              </span>
            <% end %>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              <i class="fas fa-user"></i>&nbsp;<%= current_user.email %>
            </a>
            <div class="navbar-dropdown">
              <%= link_to "個人資料", edit_user_registration_path, class:'navbar-item' %>
              <%= link_to "訂單紀錄", orders_path, class: 'navbar-item' %>
              <hr class="navbar-divider">
              <%= link_to "後台管理", admin_root_path, class: 'navbar-item' %>
              <hr class="navbar-divider">
              <%= link_to "登出", destroy_user_session_path, method:'delete', data: {confirm: '確認登出?!' }, class:'navbar-item' %>
            </div>
          </div>
        <% else %>
          <div class="buttons">
            <%= link_to "註冊", new_user_registration_path, class: 'button is-primary' %>
            <%= link_to "登入", new_user_session_path, class: 'button is-light' %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</nav>
